---
import { BackgroundPaths } from "./ui/background-paths";
import { siteConfig } from "../config";
import TechStack from "./TechStack.astro";
---

<section id="hero" class="relative min-h-screen">
  <BackgroundPaths client:load>
    <div class="min-h-screen flex flex-col justify-center pt-20 pb-10">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-16 items-center">
        {/* Left: Text Content - Better Aligned */}
        <div class="lg:col-span-7 text-center lg:text-left z-10 order-2 lg:order-1 lg:pr-8">
          <div class="inline-flex items-center gap-3 px-4 py-2 rounded-full glass anim-fadeup mb-6" style="animation-delay:.05s">
            <span class="text-2xl">ðŸ‘‹</span>
            <span class="text-sm font-medium text-[var(--color-text-muted)]">Welcome â€” I build apps that scale</span>
          </div>

          <h1 class="text-5xl sm:text-6xl md:text-7xl font-extrabold leading-tight text-[var(--color-text)] tracking-tight mb-6 anim-drop" style="animation-delay:.15s">
            {siteConfig.name}
          </h1>

          <div class="mb-8">
            <div class="text-lg text-[var(--color-text-muted)] mb-1">Software Engineer</div>
            <div class="text-3xl sm:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[var(--color-accent)] to-[var(--color-primary)]">
              {siteConfig.title}
            </div>
          </div>

          <p class="max-w-2xl text-[var(--color-text-muted)] text-lg sm:text-xl leading-relaxed mb-10 anim-fadeup mx-auto lg:mx-0" style="animation-delay:.25s">
            {siteConfig.description}
          </p>

          <div class="flex flex-col sm:flex-row items-center gap-6 anim-fadeup justify-center lg:justify-start" style="animation-delay:.35s">
            <div class="flex items-center gap-4">
              <a href="#projects" class="group relative inline-flex items-center justify-center px-8 py-3.5 text-base font-bold text-white transition-all duration-200 bg-[var(--color-primary)] font-pj rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--color-primary)] hover:bg-[var(--color-accent)] shadow-[0_0_20px_rgba(124,58,237,0.5)] hover:shadow-[0_0_30px_rgba(6,182,212,0.6)] hover:-translate-y-1">
                View My Work
              </a>
              <a href="#about" class="group relative inline-flex items-center justify-center px-8 py-3.5 text-base font-bold text-[var(--color-text)] transition-all duration-200 bg-transparent border-2 border-[var(--color-border)] font-pj rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 hover:bg-[var(--glass-bg)] hover:border-[var(--color-accent)] hover:text-[var(--color-accent)]">
                Learn More
              </a>
            </div>

            {/* Social Icons */}
            <div class="flex items-center gap-3 pl-2 sm:border-l border-[var(--color-border)] sm:pl-6">
              {siteConfig.social?.email && (
                <a href={`mailto:${siteConfig.social.email}`} aria-label="Email" class="p-3 rounded-lg bg-[var(--glass-bg)] border border-[var(--color-border)] text-[var(--color-text-muted)] hover:text-[var(--color-primary)] hover:border-[var(--color-primary)] hover:shadow-[0_0_15px_rgba(124,58,237,0.3)] transition-all duration-300 hover:-translate-y-1">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                  </svg>
                </a>
              )}
              {siteConfig.social?.linkedin && (
                <a href={siteConfig.social.linkedin} target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="p-3 rounded-lg bg-[var(--glass-bg)] border border-[var(--color-border)] text-[var(--color-text-muted)] hover:text-[var(--color-primary)] hover:border-[var(--color-primary)] hover:shadow-[0_0_15px_rgba(124,58,237,0.3)] transition-all duration-300 hover:-translate-y-1">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                    <rect x="2" y="9" width="4" height="12"></rect>
                    <circle cx="4" cy="4" r="2"></circle>
                  </svg>
                </a>
              )}
              {siteConfig.social?.github && (
                <a href={siteConfig.social.github} target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="p-3 rounded-lg bg-[var(--glass-bg)] border border-[var(--color-border)] text-[var(--color-text-muted)] hover:text-[var(--color-primary)] hover:border-[var(--color-primary)] hover:shadow-[0_0_15px_rgba(124,58,237,0.3)] transition-all duration-300 hover:-translate-y-1">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                  </svg>
                </a>
              )}
            </div>
          </div>
        </div>

        {/* Right: Profile Picture with Animated Circles */}
        <div class="lg:col-span-5 flex items-center justify-center relative order-1 lg:order-2">
          <div id="profile-scroll-container" class="relative flex items-center justify-center">
            <div class="relative w-56 h-56 sm:w-64 sm:h-64 lg:w-72 lg:h-72">
              {/* Large Gradient Circle Background (moves with scroll) */}
              <div id="gradient-circle" class="absolute -inset-8 rounded-full bg-gradient-to-br from-[var(--color-primary)] via-[var(--color-accent)] to-[var(--color-primary)] opacity-20 blur-3xl transition-all duration-500"></div>
              
              {/* Animated Border Circles (move with scroll) */}
              <div id="circle-1" class="absolute inset-0 rounded-full border-2 border-[var(--color-accent)] opacity-30 animate-circle-rotate transition-all duration-500"></div>
              <div id="circle-2" class="absolute inset-4 rounded-full border border-[var(--color-primary)] opacity-25 animate-circle-rotate-reverse transition-all duration-500"></div>
              <div id="circle-3" class="absolute inset-8 rounded-full border border-[var(--color-accent)] opacity-20 animate-circle-pulse transition-all duration-500"></div>
              
              {/* Profile Image Container (moves with scroll) */}
              <div id="profile-image-container" class="absolute inset-6 rounded-full overflow-hidden border-4 border-[var(--color-border)] bg-[var(--color-bg)] z-10 shadow-[0_20px_60px_rgba(0,0,0,0.3)] transition-all duration-500 hover:border-[var(--color-primary)] hover:shadow-[0_20px_60px_rgba(124,58,237,0.4)]">
                <img src="./public/obaid.jpeg" alt="Obaidullah Arshad" class="w-full h-full object-cover hover:scale-110 transition-transform duration-700" loading="eager" />
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tech Stack Section -->
      <TechStack />
    </div>
  </BackgroundPaths>

  <style>
    .anim-drop { animation: dropIn .8s cubic-bezier(.2,.9,.3,1) both; }
    .anim-fadeup { animation: fadeUp .8s cubic-bezier(.2,.9,.3,1) both; }
    
    @keyframes circle-rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    @keyframes circle-rotate-reverse {
      from { transform: rotate(360deg); }
      to { transform: rotate(0deg); }
    }
    @keyframes circle-pulse {
      0% { transform: scale(1); opacity: 0.2; }
      50% { transform: scale(1.05); opacity: 0.4; }
      100% { transform: scale(1); opacity: 0.2; }
    }

    .animate-circle-rotate { animation: circle-rotate 20s linear infinite; }
    .animate-circle-rotate-reverse { animation: circle-rotate-reverse 15s linear infinite; }
    .animate-circle-pulse { animation: circle-pulse 4s ease-in-out infinite; }
  </style>

  <script>
    // Smooth scroll parallax effect for profile picture and ALL circles
    const profileContainer = document.getElementById('profile-image-container');
    const gradientCircle = document.getElementById('gradient-circle');
    const circle1 = document.getElementById('circle-1');
    const circle2 = document.getElementById('circle-2');
    const circle3 = document.getElementById('circle-3');
    
    if (profileContainer && gradientCircle && circle1 && circle2 && circle3) {
      let ticking = false;
      
      window.addEventListener('scroll', () => {
        if (!ticking) {
          window.requestAnimationFrame(() => {
            const scrolled = window.scrollY;
            const baseRate = 0.12; // Smooth parallax rate
            
            // Move profile picture down as user scrolls
            profileContainer.style.transform = `translateY(${scrolled * baseRate}px)`;
            
            // Move gradient circle with slightly different rate for depth
            gradientCircle.style.transform = `translateY(${scrolled * (baseRate * 0.7)}px) scale(${1 + scrolled * 0.0002})`;
            
            // Move all border circles together with the profile
            circle1.style.transform = `translateY(${scrolled * baseRate}px) rotate(${scrolled * 0.1}deg)`;
            circle2.style.transform = `translateY(${scrolled * baseRate}px) rotate(${-scrolled * 0.15}deg)`;
            circle3.style.transform = `translateY(${scrolled * baseRate}px) scale(${1 + Math.sin(scrolled * 0.01) * 0.05})`;
            
            ticking = false;
          });
          
          ticking = true;
        }
      });
    }
  </script>
</section>
