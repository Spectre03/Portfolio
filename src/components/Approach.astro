---
import { siteConfig } from "../config";
---

<section id="approach" class="relative py-20 bg-[var(--color-bg)] scroll-fade">
  <div class="max-w-6xl mx-auto px-6 sm:px-12 md:px-16">
    <div class="text-center mb-10 scroll-slide-left">
      <h2 class="text-3xl sm:text-4xl md:text-5xl font-bold text-[var(--color-text)]">My approach</h2>
      <p class="mt-3 text-[var(--color-text-muted)] max-w-2xl mx-auto">A simple, transparent process that keeps you informed and involved — from strategy to launch.</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div class="rounded-2xl glass border border-[var(--color-border)] p-6 shadow hover:shadow-[0_20px_60px_rgba(6,182,212,0.2)] transition-all duration-300 scroll-stagger">
        <div class="text-[var(--color-accent)] font-semibold mb-3">Phase 1</div>
        <h3 class="text-lg font-bold mb-2">Planning & Strategy</h3>
        <p class="text-[var(--color-text-muted)] text-sm">We'll collaborate to map out goals, target audience, and the site structure — focusing on clarity and conversions.</p>
      </div>

      <div class="rounded-2xl glass border border-[var(--color-border)] p-6 shadow hover:shadow-[0_20px_60px_rgba(124,58,237,0.1)] transition-all duration-300 scroll-stagger">
        <div class="text-[var(--color-accent)] font-semibold mb-3">Phase 2</div>
        <h3 class="text-lg font-bold mb-2">Development & Progress Updates</h3>
        <p class="text-[var(--color-text-muted)] text-sm">From wireframes to working builds — regular updates, demos, and iterative feedback keep the project on track.</p>
      </div>

      <div class="rounded-2xl glass border border-[var(--color-border)] p-6 shadow hover:shadow-[0_20px_60px_rgba(6,182,212,0.15)] transition-all duration-300 scroll-stagger">
        <div class="text-[var(--color-accent)] font-semibold mb-3">Phase 3</div>
        <h3 class="text-lg font-bold mb-2">Launch & Handover</h3>
        <p class="text-[var(--color-text-muted)] text-sm">Final QA, performance tuning, and deployment. I provide documentation and a clear handover plan.</p>
      </div>
    </div>

    <div class="mt-10 text-center">
      <p class="mb-4 text-lg font-medium">Ready to take your digital presence to the next level? Reach out and let's talk.</p>
      <div class="flex items-center justify-center gap-4">
        <a href="/My Resume.pdf" target="_blank" rel="noopener noreferrer" download="Obaidullah-Arshad-Resume.pdf" aria-label="Download Resume" class="cv-glow inline-flex items-center px-8 py-3 rounded-lg border-2 border-[var(--color-accent)] text-[var(--color-accent)] font-semibold hover:bg-[var(--color-accent)] hover:text-[var(--color-bg)] transition duration-300 uppercase text-sm tracking-wide">
          Show CV
        </a>
        <button id="contact-copy-btn" data-email={siteConfig.social.email} class="contact-glow inline-flex items-center px-8 py-3 rounded-lg border-2 border-[var(--color-accent)] text-[var(--color-accent)] font-semibold hover:bg-[var(--color-accent)] hover:text-[var(--color-bg)] transition duration-300 uppercase text-sm tracking-wide">
          Contact Me
        </button>
      </div>
    </div>
  </div>

  <div class="absolute inset-0 -z-10 pointer-events-none">
    <div class="w-full h-full bg-gradient-to-t from-[var(--color-primary)]/6 to-transparent"></div>
  </div>
</section>

<script>
  (function(){
    const btn = document.getElementById('contact-copy-btn');
    if (!btn) return;
    // Insert the real email if Astro rendered it
    const emailFromAttr = btn.getAttribute('data-email');
    const email = emailFromAttr && emailFromAttr !== '{siteConfig.social.email}' ? emailFromAttr : undefined;

    btn.addEventListener('click', async (e) => {
      e.preventDefault();
      const toCopy = email || (window.__SITE_EMAIL || null);
      if (!toCopy && btn.dataset && btn.dataset.email) {
        // try dataset fallback
        try { navigator.clipboard.writeText(btn.dataset.email); showToast('Email copied to clipboard'); } catch (err) {}
        return;
      }

      try {
        await navigator.clipboard.writeText(toCopy);
        showToast('Email copied to clipboard');
      } catch (err) {
        // fallback: create temporary input
        const input = document.createElement('input');
        input.value = toCopy || '';
        document.body.appendChild(input);
        input.select();
        try { document.execCommand('copy'); showToast('Email copied to clipboard'); } catch (e) { showToast('Could not copy email'); }
        document.body.removeChild(input);
      }

      // if there's a contact section, scroll to it after copying
      const contact = document.getElementById('contact');
      if (contact) contact.scrollIntoView({ behavior: 'smooth' });
    });

    function showToast(msg){
      const t = document.createElement('div');
      t.textContent = msg;
      t.style.position = 'fixed';
      t.style.left = '50%';
      t.style.bottom = '32px';
      t.style.transform = 'translateX(-50%)';
      t.style.background = 'rgba(0,0,0,0.75)';
      t.style.color = '#fff';
      t.style.padding = '10px 14px';
      t.style.borderRadius = '8px';
      t.style.fontSize = '14px';
      t.style.zIndex = '9999';
      t.style.opacity = '0';
      t.style.transition = 'opacity 200ms ease, transform 200ms ease';
      document.body.appendChild(t);
      requestAnimationFrame(()=>{ t.style.opacity = '1'; t.style.transform = 'translateX(-50%) translateY(-6px)'; });
      setTimeout(()=>{ t.style.opacity = '0'; t.style.transform = 'translateX(-50%) translateY(0px)'; setTimeout(()=>t.remove(),220); }, 2200);
    }
  })();
</script>

<style>
  .contact-glow {
    box-shadow: 0 0 20px rgba(6, 182, 212, 0.3), 0 0 40px rgba(124, 58, 237, 0.15);
    animation: glow-pulse 2s ease-in-out infinite;
  }

  .cv-glow {
    box-shadow: 0 0 20px rgba(6, 182, 212, 0.3), 0 0 40px rgba(124, 58, 237, 0.15);
    animation: glow-pulse 2s ease-in-out infinite;
  }

  @keyframes glow-pulse {
    0%, 100% { 
      box-shadow: 0 0 20px rgba(6, 182, 212, 0.3), 0 0 40px rgba(124, 58, 237, 0.15);
    }
    50% { 
      box-shadow: 0 0 30px rgba(6, 182, 212, 0.5), 0 0 60px rgba(124, 58, 237, 0.25);
    }
  }
</style>
